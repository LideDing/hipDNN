CMAKE_MINIMUM_REQUIRED (VERSION 2.8.8) 
MESSAGE(STATUS "CMAKE VERSION ${CMAKE_VERSION}")

SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_CURRENT_SOURCE_DIR}/../cmake ${CMAKE_CURRENT_SOURCE_DIR}/cmake ${HIP_PATH}/cmake ${MIOPEN_PATH}/lib/cmake/miopen)

execute_process(COMMAND ${HIP_PATH}/bin/hipconfig --platform OUTPUT_VARIABLE HIP_PLATFORM)
MESSAGE (STATUS "HIP_PATH : ${HIP_PATH}")

#Make sure HIP is installed in the target system
FIND_PACKAGE(HIP 1.0 REQUIRED)

SET(CMAKE_CXX_COMPILER "${HIP_PATH}/bin/hipcc")
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../library/include   ${HIP_PATH}/include)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/utils/)
FILE(GLOB HIPDNNTESTSRCS "${CMAKE_CURRENT_SOURCE_DIR}/utils/src/*.cc" ${CMAKE_CURRENT_SOURCE_DIR}/*.cpp)
INCLUDE_DIRECTORIES(${MIOPEN_PATH}/include/)
LINK_DIRECTORIES(${MIOPEN_PATH}/lib)
ADD_EXECUTABLE(unittest ${HIPDNNTESTSRCS})
set_target_properties(unittest PROPERTIES LINKER_LANGUAGE CXX)
TARGET_LINK_LIBRARIES(unittest hipdnn MIOpen pthread)

  


